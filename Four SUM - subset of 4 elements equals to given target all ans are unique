class Solution {
    public List<List<Integer>> fourSum(int[] nums, int target) {
        Set<List<Integer>>  ans = new HashSet<List<Integer>>(); // set is initialized by HashSet
        if(nums.length == 0)
            return new ArrayList<List<Integer>>(ans);
        List<Integer> set = new ArrayList<Integer>();
        
        fourSum(nums,target,0,ans,set,0);
        return new ArrayList<List<Integer>>(ans); // List can take set in the constructor
    }
    public void fourSum(int[] nums, int target, int index, Set<List<Integer>> ans, List<Integer> set,int sum){
        if(set.size() == 4 && sum==target){
            List<Integer> setAns = new ArrayList<Integer>(set);
            // sort so that same combination becomes sorted and 
            // set would not add that same list
            Collections.sort(setAns); 
            ans.add(setAns);
        }

        if(set.size()==4)
            return;
        
        for(int i=index;i<nums.length;i++){
            set.add(nums[i]);
            fourSum(nums,target,i+1,ans,set,sum+nums[i]);
            set.remove(set.size()-1);
        }
    }
}
